---
id: "134d"
status: open
deps: []
links: []
created: 2026-02-17T13:26:41Z
type: task
priority: 1
---
# P1: Pre-public repo setup — visibility, protection, and public-repo hardening

## Acceptance Criteria

### Repo visibility
- [x] Make repo public on GitHub

### Branch protection / ruleset (`master`)
- [x] Require pull requests (no direct pushes to `master`)
- [x] Require at least 1 approval and code owner review
- [x] Add root `CODEOWNERS` with `* @jbohnslav` (King-only approvals)
- [x] Require status check `CI / check`
- [x] Require conversation resolution before merge
- [x] Dismiss stale approvals on new commits
- [x] Block force-push and branch deletion
- [x] Apply rules to admins

### Public workflow hardening
- [x] Lock down public comment-triggered AI workflows (`.github/workflows/claude.yml`, `.github/workflows/claude-code-review.yml`) so only `OWNER`, `MEMBER`, or `COLLABORATOR` can trigger privileged actions
- [x] Ensure workflows safely no-op when `CLAUDE_CODE_OAUTH_TOKEN` is unavailable
- [x] Confirm fork-originated PR/comments cannot exercise secret-backed paths

### Release/tag protection
- [x] Add tag protection for `v*` so release tags are maintainer-controlled

### Pre-public content audit
- [x] Review `third-party/` directory — decide if `openclaw` should ship in public repo
- [x] Scan `.kd/` council threads for anything not suitable for public view
- [x] Confirm no secrets in git history (audited: clean)

### Security and maintenance defaults
- [x] Enable GitHub secret scanning
- [x] Enable GitHub push protection for secrets
- [x] Enable Dependabot alerts and security updates

### Open-source hygiene docs
- [x] Add `SECURITY.md` with vulnerability disclosure policy
- [x] Add `CONTRIBUTING.md` (even minimal — "file an issue first")
- [x] Add GitHub issue templates (bug report, feature request)

### Nice-to-have (non-blocking)
- [ ] Add Code of Conduct
- [ ] Add GitHub discussion templates

## Work Log

- Removed all 6 git submodules (beads, gastown, llm-council, openclaw, ralph, skills) and gitignored `third-party/`
- Gitignored `.kd/**/threads/` (653 files, ~5MB of council/peasant transcripts) and untracked from index
- Hardened `claude.yml`: added per-event `author_association` checks (OWNER/MEMBER/COLLABORATOR), `sender.type == 'User'` guard, and `CLAUDE_CODE_OAUTH_TOKEN` secret presence check
- Hardened `claude-code-review.yml`: added `author_association` check on PR author and secret presence check
- Created `.github/CODEOWNERS` (`* @jbohnslav`)
- Created `.github/dependabot.yml` (weekly pip + GitHub Actions updates)
- Created `.github/ISSUE_TEMPLATE/` (bug report + feature request)
- Created `SECURITY.md` pointing to GitHub private vulnerability reporting
- Created `CONTRIBUTING.md` ("file an issue first")
- Made repo public on GitHub
- Created branch ruleset "Protect master": require PR, 1 approval, code owner review, status check `check`, dismiss stale approvals, resolve conversations, block force-push/deletion, no bypass actors
- Created tag ruleset "Protect release tags": block creation/update/deletion of `v*` tags except repo admins
- Enabled secret scanning + push protection via API
- Enabled Dependabot alerts + automated security fixes via API
- Enabled private vulnerability reporting via API
