---
id: b505
status: closed
deps: []
links: []
created: 2026-02-05T00:30:48Z
type: task
priority: 1
---
# Redesign breakdown stage contract and UX

The design phase works well, but the breakdown stage has significant friction. Current issues:

1. **Unclear contract**: `parse_breakdown_tickets()` expects a specific format but there's no documented spec for what breakdown.md should contain
2. **Manual authoring is error-prone**: Agents write breakdowns in slightly different formats, causing `--apply` to fail silently or error out
3. **No guidance for agents**: When running `kd breakdown`, there's no prompt or context pointing to the design doc

## Proposed improvements

- Define a clear, documented format for breakdown.md that `parse_breakdown_tickets()` can reliably parse
- Consider: `kd breakdown` could automatically prompt an agent with the design doc and a well-crafted prompt to generate the breakdown
- Better error messages when parsing fails (show what was expected vs what was found)
- Possibly validate breakdown format before `--apply` attempts to create tickets

## Acceptance Criteria

- [ ] Breakdown format is documented (either in code comments or a doc)
- [ ] `kd breakdown --apply` gives clear errors when format doesn't match
- [ ] Agent-friendly workflow exists (either via prompt template or automated invocation)
- [ ] Existing breakdowns can be parsed reliably
