---
from: king
to: claude
timestamp: 2026-02-17T03:50:26Z
---

We need to restore cursor backend code that was removed across 3 commits (4e7c196, d71d7fb, 2a64eb9). The removal went nuclear â€” it deleted all cursor backend infrastructure (parsers, builders, extractors, tests) when it should have only removed cursor from DEFAULT_AGENTS and council config.

What's the best git strategy to surgically restore just the deleted cursor code? We want to keep:
- cursor OUT of DEFAULT_AGENTS (config.py)
- cursor OUT of default council members
- merge_assistant_snapshots() REMOVED (simple concat is correct)
- cursor branching in poll.py REMOVED (unified concat path works)

But restore:
- All cursor backend code in agent.py (parse_cursor_response, build_cursor_command, extractors, dict entries)
- cursor in VALID_BACKENDS
- All cursor tests in test_agent.py, test_config.py, test_tui_poll.py

Options I see:
1. git checkout <pre-removal-sha> -- <files> then manually re-remove what should stay removed
2. git revert the 3 commits then manually re-apply the intended changes
3. git diff to generate patches and apply selectively
4. Just manually edit (what we started doing)

Which approach minimizes risk of missing something or introducing bugs?
