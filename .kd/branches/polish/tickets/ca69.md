---
id: "ca69"
status: closed
deps: []
links: []
created: 2026-02-16T11:33:16Z
type: bug
priority: 2
---
# kd tk dep overwrites existing dependencies instead of appending

`kd tk dep` should add a dependency while preserving existing deps. Current behavior appears to replace the deps list with only the latest dep.

Repro:
1. Run `kd tk dep cf1a 3642`
2. Run `kd tk dep cf1a d869`
3. Inspect ticket frontmatter

Observed:
- `deps: [d869]`

Expected:
- `deps: [3642, d869]` (append when absent, no-op if already present)

## Worklog

- 2026-02-17 03:30 â€” Fixed: parse_ticket silently dropped deps/links/tags when YAML value was scalar instead of list. Added coerce_to_str_list() that wraps scalars in a list and stringifies all items. Added tests for coerce_to_str_list, scalar dep parsing, CLI dep append, dep idempotency, dep survival across status changes, and dep not-found.
