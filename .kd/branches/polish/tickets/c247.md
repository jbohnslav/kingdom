---
id: "c247"
status: closed
deps: []
links: []
created: 2026-02-15T23:54:34Z
type: task
priority: 2
---
# kd council: hard to find the right thread when auto-pickup fails

## Acceptance Criteria

- [x] Prefix matching: `kd council show council-cf` resolves to `council-cfa4`
- [x] Ambiguous prefix shows matching threads with topics and dates
- [x] Thread-not-found shows available threads with topics as suggestions
- [x] No-threads case gives clear guidance: "Use `kd council ask` to start one"
- [x] Stale current_thread pointer falls back to most recent thread
- [x] Most-recent fallback prints "Using most recent thread: <id>"
- [x] All council commands use unified resolver: show, status, watch, retry
- [x] Tests cover all new behaviors (9 thread resolution tests, 9 CLI tests)

## Worklog

- Added `resolve_thread()` to `thread.py` with exact + prefix matching
- Added `AmbiguousThreadMatch` and `ThreadNotFoundError` exceptions
- Added `resolve_council_thread_id()` helper in `cli.py` â€” unified resolution for all council commands
- Updated `council show`, `council status`, `watch_thread`, `council retry` to use resolver
- Extracted `show_legacy_run()` for backward-compatible run-bundle display
- Added `topic_for_thread()` helper for topic summaries in error messages
- 18 new tests (9 in test_thread.py, 9 in test_cli_council.py), all passing
- Full suite: 1048 passed, 29 skipped
