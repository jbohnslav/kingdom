---
id: a9f1
status: closed
deps: [d52d]
links: []
created: 2026-02-14T14:12:21Z
type: task
priority: 2
---
# Update kd init, .gitignore, and state.py for config

Make `kd init` scaffold the config file and fix gitignore so it's tracked.

## Details

- `kd init` creates `.kd/config.json` with the default config (three built-in agents, all on council, claude as peasant). Makes the config discoverable.
- Add `!config.json` to `.kd/.gitignore` to unignore it (since `*.json` is currently ignored).
- `state.py`: remove auto-creation of empty `config.json` in `ensure_base_layout()`.
- Remove `create_default_agent_files()` call from init (already handled by ticket 5151 removing the function).

## Acceptance Criteria

- [x] `kd init` creates `.kd/config.json` with default config content
- [x] `.kd/.gitignore` has `!config.json` rule
- [x] `state.py` no longer auto-creates empty `config.json`
- [x] `kd init` no longer creates `.kd/agents/` directory
- [x] Running `kd init` on an existing project with a config file doesn't overwrite it

## Worklog

- Added `!config.json` to .kd/.gitignore (both existing file and template in state.py)
- Removed empty config.json auto-creation from ensure_base_layout()
- kd init now scaffolds config.json with full defaults (agents, council, peasant)
- Added 2 new tests: config creation with defaults, idempotent no-overwrite
- Manually tested kd init output
