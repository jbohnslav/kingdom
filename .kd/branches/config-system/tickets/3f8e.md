---
id: 3f8e
status: open
deps: [d52d, a9f1]
links: []
created: 2026-02-14T14:12:21Z
type: task
priority: 2
---
# Update kd doctor to validate config

Extend `kd doctor` to validate `.kd/config.json` and check backend CLIs.

## Details

- Parse `.kd/config.json` and report errors (invalid JSON, unknown keys, missing required fields, bad cross-references)
- For each agent defined in config, check that its backend CLI is installed using `BACKEND_DEFAULTS[backend]["version_command"]`
- Report missing CLIs with the `install_hint` from `BACKEND_DEFAULTS`
- If no config file exists, report that defaults are in use (not an error)

## Acceptance Criteria

- [ ] `kd doctor` validates config JSON syntax
- [ ] `kd doctor` reports unknown keys, missing fields, bad cross-references
- [ ] `kd doctor` checks each configured agent's backend CLI is installed
- [ ] Missing CLIs show install hints
- [ ] No config file is reported as "using defaults" (not an error)
- [ ] Existing doctor checks (non-config) still work
