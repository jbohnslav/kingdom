---
id: "70f6"
status: closed
deps: []
links: []
created: 2026-02-14T17:47:29Z
type: task
priority: 2
---
# council show: paginate by turns with visual separation

## Problem

`kd council show <thread-id>` dumps the entire thread history as a flat list with no visual boundaries. The config-system review thread hit 2195 lines / 30 messages — that's a huge token cost when an agent just wants to see the latest responses. Most of the time you only care about the most recent conversational turn (the last query + all responses to it). Multi-turn threads are hard to scan without visual separation.

## Proposal

- A "turn" = one king message + all member responses before the next king message
- Default: show only the most recent turn
- `--last N`: show the last N turns (not messages)
- `--all`: show the full thread history
- Clear visual separators between turns (horizontal rules, turn headers with turn number and timestamp)
- Summary line at the top like "Showing last turn (3 of 30 messages). Use --all for full history."

## Acceptance Criteria

- [x] `kd council show <id>` defaults to showing only the latest turn
- [x] `kd council show <id> --last N` shows the last N turns
- [x] `kd council show <id> --all` shows the full thread
- [x] Summary line indicates how many messages/turns are hidden
- [x] Clear visual separator (horizontal rule or similar) between conversational turns
- [x] Each turn has a header showing turn number and timestamp
- [x] Works with both `--all` and default (latest turn) display modes

Note: Subsumes former ticket d09d (visual turn separation).

## Worklog

Implementation:
- Added `group_messages_into_turns()` helper: groups messages by king asks (a turn = one king message + all responses before the next king message)
- Added `print_turn()` helper: renders a turn with `── Turn N/M ── timestamp ──` header
- Updated `council_show()` with `--last N` and `--all` options; default shows latest turn only
- Summary line: "Showing 1 turn of 6 (4 messages of 21). Use --all for full history."
- Pluralization: "1 turn" vs "3 turns", "1 message" vs "9 messages"
- `--last N` clamped to total turns (no error on --last 100 with 3 turns)
- 7 new tests in TestCouncilShowPagination, 6 existing tests still pass
