---
from: king
to: all
timestamp: 2026-02-16T11:41:20Z
---

We're about to implement ticket 213e — format_thread_history(). It reads all finalized messages from a thread directory and formats them as a multi-party conversation prompt for auto-turn injection. The spec says: format_thread_history(thread_dir, target_member) returns a string, output like '[Previous conversation]\nking: ...\nclaude: ...\n---\nYou are {target_member}. Continue the discussion.' Questions: (1) Should this live in thread.py alongside list_messages(), or a new module? (2) The AC says 'message bodies only — no preambles, frontmatter, or instructions' — should we strip markdown headers (## Response, etc) that some agents add? (3) For directed messages (to field is a specific member, not 'all'), should we include them in other members history views or filter them out? (4) Any concerns about the output format — is the separator/suffix clear enough for agents to understand the conversation structure?
