---
id: "16e1"
status: closed
deps: [7ddd]
links: []
created: 2026-02-15T19:46:08Z
type: task
priority: 1
---
# User input and query dispatch

## Context

Handle user input: Enter sends, Shift+Enter newlines, @member addressing. On send, write king message to thread files, then launch `member.query()` via `asyncio.to_thread()`. Uses `Council.create()` directly — no CLI shelling.

## Acceptance Criteria

- [ ] **Enter** sends the message; **Shift+Enter** inserts newline
- [ ] Input area grows with content up to a reasonable max height
- [ ] Plain text broadcasts to all council members (creates WaitingPanels for all)
- [ ] `@member` sends only to named member; `@all` explicit broadcast
- [ ] King message written to thread files via `add_message()` before querying
- [ ] Member queries launched via `asyncio.to_thread(member.query, ...)` — one per targeted member, in parallel for broadcast
- [ ] Agent availability errors (FileNotFoundError) render as ErrorPanels
