---
id: "0245"
status: closed
deps: [4a91, 7656, 16e1]
links: []
created: 2026-02-15T23:03:19Z
type: task
priority: 1
---
# Phase 1 end-to-end smoke test

## Context

Dogfooding pass before Phase 2 work begins. Verify the full Phase 1 TUI lifecycle works end-to-end. File bugs found as new tickets.

## Acceptance Criteria

- [ ] Open TUI with `kd chat --new`, see empty layout with header, input area, status bar
- [ ] Type a message, hit Enter — see WaitingPanels appear for all members
- [ ] See WaitingPanel → StreamingPanel → MessagePanel lifecycle for each member
- [ ] Open existing thread with `kd chat <id>`, see full history rendered
- [ ] `@member` directed message sends only to that member
- [ ] Run `kd council ask --async` externally, open TUI — see in-flight streams picked up
- [ ] `kd council show` displays messages sent from the TUI correctly
- [ ] Error cases: missing agent CLI shows error panel, not crash
- [ ] All automated tests pass
- [ ] Any bugs found filed as new tickets

## Worklog
- 2026-02-15: Reopened after council QA. Phase 1 smoke criteria not actually met due two regressions discovered post-close: (1) TUI-run queries do not persist finalized member responses to thread files, (2) poller suppresses later stream updates after first finalized response.
- 2026-02-15: Both regressions fixed (16e1, fe84). Re-verified:
  - 724 automated tests pass (4 new run_query tests, 1 new multi-turn poll test)
  - CLI smoke: `kd chat --help` shows args, `kd chat does-not-exist` gives error, `kd chat` lists threads
  - Code review of send_message→run_query→poll→handle lifecycle confirms full data flow
  - Bugs found during council review filed on reopened tickets and backlog (3d28, d25d)
