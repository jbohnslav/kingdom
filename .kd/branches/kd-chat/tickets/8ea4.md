---
id: "8ea4"
status: closed
deps: []
links: []
created: 2026-02-15T19:46:00Z
type: task
priority: 1
---
# Add auto_rounds, mode, preamble to council config schema

## Context

`CouncilConfig` currently only has `members` and `timeout`. The chat TUI needs `auto_rounds`, `mode`, and `preamble` as flat keys under `council` in config.json. These must be added to the dataclass, validation, and `VALID_COUNCIL_KEYS`.

## Acceptance Criteria

- [ ] `CouncilConfig` dataclass has `auto_rounds: int = 3`, `mode: str = "broadcast"`, `preamble: str = COUNCIL_PREAMBLE`
- [ ] `VALID_COUNCIL_KEYS` includes `auto_rounds`, `mode`, `preamble`
- [ ] Validation: `auto_rounds` must be positive int, `mode` must be `"broadcast"` or `"sequential"`, `preamble` must be non-empty string
- [ ] Unknown council keys still raise `ValueError`
- [ ] Existing tests pass; new tests cover validation of the three new keys
- [ ] `kd config show` (or equivalent) displays the new keys with defaults
