---
id: "0940"
status: closed
deps: []
links: []
created: 2026-02-16T11:35:18Z
type: task
priority: 2
---
# Fix TUI chat visual issues: redundant name, same colors, unstable panel order

## Acceptance Criteria

- [x] Remove redundant `**sender**` from MessagePanel body (border title already shows name)
- [x] Assign distinct default colors for claude/codex/cursor; use stable hash for unknowns
- [x] Replace panels in-place (mount before existing, then remove) so order stays consistent

## Worklog

- Fixed `compose_text()` to return just the body, not `**sender**\n\nbody`
- Replaced non-deterministic `hash()` color assignment with fixed `DEFAULT_MEMBER_COLORS` dict (claude=cyan, codex=green, cursor=magenta) + `sum(ord(c))` fallback
- Changed `handle_new_message()` and `handle_stream_started()` to mount new panels `before=` the existing widget, then remove the old one, preserving position order
