---
id: kin-0360
status: open
deps: []
links: []
created: 2026-02-09T18:49:00Z
type: task
priority: 1
---
# Peasant sync â€” pull parent branch changes into worktree

Worktrees are created from a point-in-time snapshot. When the parent branch moves forward (bug fixes, test updates, other tickets merged), the worktree becomes stale. During the kin-41f9 smoke test, the peasant's worktree had outdated tests that caused false failures.

`kd peasant sync <ticket-id>` merges the parent branch into the worktree's ticket branch, then runs `init-worktree.sh` to refresh dependencies.

## Acceptance Criteria

- [ ] `kd peasant sync kin-XXXX` merges current branch into the worktree's ticket branch
- [ ] Runs `.kd/init-worktree.sh` after merge to refresh dependencies
- [ ] Fails cleanly on merge conflicts with instructions to resolve manually
- [ ] Refuses to sync while peasant is actively running (could corrupt in-progress work)
