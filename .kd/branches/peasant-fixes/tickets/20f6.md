---
id: "20f6"
status: open
deps: []
links: []
created: 2026-02-17T19:49:51Z
type: bug
priority: 1
---
# peasant stop must terminate full process tree

Bug: kd peasant stop can report stopped while backend child/grandchild processes continue running.

Required behavior:
- Stop command terminates harness and full process tree for that peasant session
- Use graceful TERM first, then force KILL after timeout if needed
- Session state reflects real process state (no stale running children after stopped)

Acceptance criteria:
- Repro case with backend subprocesses leaves no lingering PIDs after stop
- kd peasant status and session state are consistent with process reality
- Regression tests cover child-process reaping
